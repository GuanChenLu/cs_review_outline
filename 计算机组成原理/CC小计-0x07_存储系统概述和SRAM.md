# 存储系统概述和 SRAM



## 存储系统的层次结构

我们需要构建多级的存储系统解决容量、速度、成本三者间的矛盾  



构成多级存储系统的依据就是 `程序的局部性原理`

- 空间局部性

  最近被访问到的临近地址上的信息有可能被访问

- 时间局部性

  最近被访问的信息很可能还要被访问  



### 存储器的构成

存储介质：主要采用半导体器件和磁性材料



存储位元：存储**一位二进制代码**，是存储器中最小的存储单位

由若干个存储位元组成一个**存储单元**

由许多存储单元组成一个**存储器**



<img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323203141.png" style="zoom:50%;" />





## 存储器的分类

我们直接上图

![](https://gitee.com/chenlu-guan/t-image/raw/master/20220323204235.png)







## 存储器的编址和端模式

### 字存储单元和字节存储单元

- 存放一个机器字的存储单元  
- 存放一个字节的单元  

按字寻址的计算机：计算机编址的最小单位是字存储单元

按字节寻址的计算机：计算机编址的最小单位是字节



### 大小端模式



## 存储器的技术指标

![](https://gitee.com/chenlu-guan/t-image/raw/master/20220323204458.png)





## 存储系统的主要内容

<img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323204759.png" style="zoom:50%;" />





## SRAM

> CPU 缓存器使用的就是 `SRAM`

### 存储芯片的基本结构

存储芯片需要具有以下的功能：

1. 根据输入的地址将数据从中取出
2. 根据输入的地址 + 数据将数据存放在对应的地址中
3. 具有控制读指令或是写指令和被选中的控制端



存储器芯片的基本结构如下

<img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323205205.png" style="zoom:67%;" />



在  `SRAM` 中，使用 两个与非门和`RS`锁存器（其实就是 `D 触发器`）来实现上图中的存储矩阵

`D 触发器`只能存储一位的信息，下面是它的逻辑图和状态转移图

<img src="https://gitee.com/chenlu-guan/t-image/raw/master/468ba98820a2002e92e8641412bb1f8.jpg" style="zoom:67%;" />



<img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323222835.png" style="zoom:50%;" />



可以看到，地址译码器输出有 `64` 条选择线，在这里称为是`行线`，其作用是打开(某一行)上的存储位元的输入与非门，使输入的数据能够被触发器记录下来

上图中的地址线指定容量是 `2^6 = 64`个存储单元，四条数据线说明存储器的字长是4位，所以存储单元的总数是 `64 * 5 = 256`



### 双译码方式

目前的 `SRAM` 采用的是双译码的方式，以便组织更大规模的数据

- 将地址分成X向和Y向两部分，二级译码
- 第一级进行X向(行译码)和Y向(列译码)的独立译码
- 在存储元阵列中完成第二级的交叉译码
- 需要X向和Y向两个译码器，适用于大容量存储器

可以通过输入缓冲器和输出缓冲器实现数据的写入或者是读出

<img src="https://gitee.com/chenlu-guan/t-image/raw/master/5af815be6a752ae0822095a33a290fe.jpg" style="zoom:50%;" />

图中的 `CS` 是片选信号，只有当 `^cs` 有效时，`^WE` 和 `^OE`才对门 `G1, G2` 有效果

`G1、G2` 门是互锁的，保证了`读时不写，写时不读`



### SRAM 的读写时序

<img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323225252.png" style="zoom:67%;" />

1. 地址线首先有效，以便进行地址译码，选中存储单元
2. 为了读出数据，片选信号和读出使能信号也必须有效(下降沿触发)
3. 从地址有效经过 `tAQ` (**读出时间**)，数据总线`I/O`上出现了有效的读出数据
4. 之后，`^CS、^OE`信号恢复高电平，`tRC` 之后才允许地址总线发生改变，`tRC` 称为**读周期时间**



<img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323225845.png" style="zoom:67%;" />

1. 也是首先地址线有效
2. 接着是`片选信号和写命令`生效
3. 此时数据总线`I/O`上必须置入写入数据，在`tWD` 时间段内将数据写入存储器中，之后撤销 `^CS、^WE`
4. 为了`写入可靠`，`I/O`线的写入数据要有维持时间 `thD`，`^CS` 的维持时间也要比读周期长
5. `tWC` 称为`写周期时间`

为了控制方便，一般取 `tWC = tRC`，通常称为 `存取周期`



### 存储器容量的扩容

三种扩展方法

1. 位扩展，就是存储的**数据的位数变大**，只**加长每个存储单元的字长**，而不增加存储单元的数量

   选定**芯片的地址、片选、读/写控制信号线公用**，数据线**单独分开连接**  

   <img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323231344.png" style="zoom:67%;" />

2. 字扩展，扩展存储容量，就是**地址扩展**

   选定**芯片的地址、数据、读/写控制信号线公用**，由地址总线的高位译码**产生片选信号，让各个芯片分时工作**  

   <img src="https://gitee.com/chenlu-guan/t-image/raw/master/20220323231130.png" style="zoom:67%;" />

3. **先进行位扩展再进行字扩展**



总结：

1. 位扩展就是"并联"几个存储单元，将输出线分开接线
2. 字扩展也是“并联”几个存储单元，不同的存储单表示的是不同范围的数据，再由总线的高位译码器产生`片选信号`，决定使用哪个地址范围内的存储单元





<br/><br/>

完

<br/><br/><br/><br/>



---

计算机组成原理小计持续更新，欢迎关注 :smile:









